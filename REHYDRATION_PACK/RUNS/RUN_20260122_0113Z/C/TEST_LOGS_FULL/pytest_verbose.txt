============================= test session starts =============================
platform win32 -- Python 3.12.10, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\kevin\AppData\Local\Programs\Python\Python312\python.exe
cachedir: .pytest_cache
hypothesis profile 'default'
rootdir: C:\RichPanel_GIT
plugins: anyio-4.12.0, hypothesis-6.148.9, cov-7.0.0
collecting ... collected 349 items

backend/tests/test_delivery_estimate_fallback.py::DeliveryEstimateFallbackTests::test_build_no_tracking_reply_none_order_summary PASSED [  0%]
backend/tests/test_delivery_estimate_fallback.py::DeliveryEstimateFallbackTests::test_build_no_tracking_reply_order_id_is_none PASSED [  0%]
backend/tests/test_delivery_estimate_fallback.py::DeliveryEstimateFallbackTests::test_no_tracking_reply_with_order_id PASSED [  0%]
backend/tests/test_delivery_estimate_fallback.py::DeliveryEstimateFallbackTests::test_no_tracking_reply_without_order_id PASSED [  1%]
backend/tests/test_order_status_context.py::OrderStatusContextGateTests::test_empty_string_order_id_no_reply PASSED [  1%]
backend/tests/test_order_status_context.py::OrderStatusContextGateTests::test_full_context_proceeds_normally PASSED [  1%]
backend/tests/test_order_status_context.py::OrderStatusContextGateTests::test_full_context_with_camelcase_tracking_url PASSED [  2%]
backend/tests/test_order_status_context.py::OrderStatusContextGateTests::test_missing_created_at_no_reply PASSED [  2%]
backend/tests/test_order_status_context.py::OrderStatusContextGateTests::test_missing_order_id_no_reply PASSED [  2%]
backend/tests/test_order_status_context.py::OrderStatusContextGateTests::test_missing_shipping_method_bucket_no_reply PASSED [  2%]
backend/tests/test_order_status_context.py::OrderStatusContextGateTests::test_missing_tracking_and_shipping_method_no_reply PASSED [  3%]
backend/tests/test_order_status_context.py::OrderStatusContextGateTests::test_multiple_missing_fields_logs_all PASSED [  3%]
backend/tests/test_order_status_context.py::OrderStatusContextGateTests::test_none_order_summary_no_reply PASSED [  3%]
backend/tests/test_order_status_context.py::OrderStatusContextGateTests::test_tracking_signal_with_empty_strings PASSED [  4%]
backend/tests/test_richpanel_client_safety.py::RichpanelClientSafetyTests::test_dry_run_does_not_bypass_write_disabled PASSED [  4%]
backend/tests/test_richpanel_client_safety.py::RichpanelClientSafetyTests::test_prod_default_read_only_blocks_writes 
backend/tests/test_richpanel_client_safety.py::RichpanelClientSafetyTests::test_prod_default_read_only_blocks_writes PASSED [  4%]
backend/tests/test_richpanel_client_safety.py::RichpanelClientSafetyTests::test_read_only_env_override_allows_false_but_write_disabled_blocks PASSED [  4%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_anthropic_request_success PASSED [  5%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_build_prompt PASSED [  5%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_extract_findings PASSED [  5%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_extract_findings_max_limit PASSED [  6%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_extract_text_empty PASSED [  6%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_extract_text_from_response PASSED [  6%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_format_comment_with_response_id PASSED [  6%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_format_comment_without_response_id PASSED [  7%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_is_approved_false_positive_all_approved PASSED [  7%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_is_approved_false_positive_mixed PASSED [  7%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_main_fails_without_anthropic_key PASSED [  8%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_main_raises_when_response_id_missing PASSED [  8%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_main_runs_when_forced_even_without_label PASSED [  8%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_main_skip_without_gate_label PASSED [  8%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_main_warns_on_response_model_mismatch PASSED [  9%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_model_selection_r0 PASSED [  9%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_model_selection_r1 PASSED [  9%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_model_selection_r2 PASSED [ 10%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_model_selection_r3 PASSED [ 10%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_model_selection_r4 PASSED [ 10%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_normalize_risk_missing PASSED [ 10%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_normalize_risk_multiple PASSED [ 11%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_normalize_risk_valid_labels PASSED [ 11%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_normalize_risk_with_suffix PASSED [ 11%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_parse_verdict_fail PASSED [ 12%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_parse_verdict_missing PASSED [ 12%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_parse_verdict_pass PASSED [ 12%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_require_env_missing PASSED [ 12%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_require_env_present PASSED [ 13%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_truncate_short_text PASSED [ 13%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_truncate_text PASSED [ 13%]
scripts/test_claude_gate_review.py::TestClaudeGateReview::test_write_output PASSED [ 14%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_business_days_skip_weekend PASSED [ 14%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_late_window_reports_any_day_now PASSED [ 14%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_mapping_bool_value_skipped_prefers_specific PASSED [ 14%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_mapping_fallback_standard_shipping PASSED [ 15%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_mapping_invalid_entries_fall_back_when_empty PASSED [ 15%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_mapping_invalid_json_falls_back_to_defaults PASSED [ 15%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_mapping_invalid_json_type_falls_back PASSED [ 16%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_mapping_precedence_longest_key PASSED [ 16%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_mapping_prefers_digit_key_when_method_has_digit PASSED [ 16%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_mapping_single_value_list PASSED [ 16%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_mapping_string_values_coerce PASSED [ 17%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_mapping_tie_breaker_equal_length PASSED [ 17%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_mapping_tie_prefers_faster_window PASSED [ 17%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_mapping_unicode_digit_strings_ignored PASSED [ 18%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_missing_or_invalid_dates_returns_none PASSED [ 18%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_parse_transit_days_empty_returns_none PASSED [ 18%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_parse_transit_days_numeric_range PASSED [ 18%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_remaining_window_allows_zero_minimum PASSED [ 19%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_same_day_order_remaining_window PASSED [ 19%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_shipping_method_normalization_handles_ranges PASSED [ 19%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_standard_shipping_canonical_remaining_window PASSED [ 20%]
scripts/test_delivery_estimate.py::DeliveryEstimateTests::test_weekend_crossing_remaining_window PASSED [ 20%]
scripts/test_e2e_smoke_encoding.py::ScenarioPayloadTests::test_business_day_anchor_skips_weekend PASSED [ 20%]
scripts/test_e2e_smoke_encoding.py::ScenarioPayloadTests::test_iso_business_days_before_validation PASSED [ 20%]
scripts/test_e2e_smoke_encoding.py::ScenarioPayloadTests::test_order_status_no_tracking_shape PASSED [ 21%]
scripts/test_e2e_smoke_encoding.py::ScenarioPayloadTests::test_order_status_no_tracking_short_window_shape PASSED [ 21%]
scripts/test_e2e_smoke_encoding.py::ScenarioPayloadTests::test_order_status_no_tracking_standard_shipping_3_5_shape PASSED [ 21%]
scripts/test_e2e_smoke_encoding.py::ScenarioPayloadTests::test_order_status_scenario_includes_required_fields PASSED [ 22%]
scripts/test_e2e_smoke_encoding.py::ScenarioPayloadTests::test_order_status_scenario_is_deterministic PASSED [ 22%]
scripts/test_e2e_smoke_encoding.py::ScenarioPayloadTests::test_order_status_scenario_no_pii PASSED [ 22%]
scripts/test_e2e_smoke_encoding.py::DraftReplyHelperTests::test_compute_draft_reply_body_no_tracking_uses_estimate PASSED [ 22%]
scripts/test_e2e_smoke_encoding.py::DraftReplyHelperTests::test_compute_draft_reply_body_with_tracking PASSED [ 23%]
scripts/test_e2e_smoke_encoding.py::DraftReplyHelperTests::test_extract_latest_comment_body_fallback PASSED [ 23%]
scripts/test_e2e_smoke_encoding.py::DraftReplyHelperTests::test_extract_latest_comment_body_prefers_operator PASSED [ 23%]
scripts/test_e2e_smoke_encoding.py::DraftReplyHelperTests::test_fetch_latest_reply_hash PASSED [ 24%]
scripts/test_e2e_smoke_encoding.py::DraftReplyHelperTests::test_fetch_latest_reply_hash_no_network PASSED [ 24%]
scripts/test_e2e_smoke_encoding.py::DiagnosticsTests::test_diagnose_selects_first_successful_candidate PASSED [ 24%]
scripts/test_e2e_smoke_encoding.py::DiagnosticsTests::test_diagnose_skips_without_confirm PASSED [ 24%]
scripts/test_e2e_smoke_encoding.py::ReplyEvidenceTests::test_reply_evidence_message_delta PASSED [ 25%]
scripts/test_e2e_smoke_encoding.py::ReplyEvidenceTests::test_reply_evidence_middleware_source PASSED [ 25%]
scripts/test_e2e_smoke_encoding.py::ReplyEvidenceTests::test_reply_evidence_none PASSED [ 25%]
scripts/test_e2e_smoke_encoding.py::ReplyEvidenceTests::test_reply_evidence_status_change_only PASSED [ 26%]
scripts/test_e2e_smoke_encoding.py::ReplyEvidenceTests::test_reply_evidence_tags_and_update_success PASSED [ 26%]
scripts/test_e2e_smoke_encoding.py::ClassificationTests::test_auto_close_applied_degrades_to_pass_weak PASSED [ 26%]
scripts/test_e2e_smoke_encoding.py::ClassificationTests::test_auto_close_fail_debug_when_criteria_missing PASSED [ 26%]
scripts/test_e2e_smoke_encoding.py::ClassificationTests::test_fail_when_base_pass_false PASSED [ 27%]
scripts/test_e2e_smoke_encoding.py::ClassificationTests::test_fallback_used_marks_pass_weak PASSED [ 27%]
scripts/test_e2e_smoke_encoding.py::ClassificationTests::test_fallback_used_with_failed_criteria_marks_fail_debug PASSED [ 27%]
scripts/test_e2e_smoke_encoding.py::ClassificationTests::test_pass_strong_requires_success_tag PASSED [ 28%]
scripts/test_e2e_smoke_encoding.py::ClassificationTests::test_skip_tags_fail PASSED [ 28%]
scripts/test_e2e_smoke_encoding.py::PIISafetyTests::test_pii_scan_allows_openai_response_id PASSED [ 28%]
scripts/test_e2e_smoke_encoding.py::PIISafetyTests::test_pii_scan_detects_email PASSED [ 28%]
scripts/test_e2e_smoke_encoding.py::PIISafetyTests::test_pii_scan_detects_event_identifier PASSED [ 29%]
scripts/test_e2e_smoke_encoding.py::PIISafetyTests::test_pii_scan_detects_ticket_number_flag PASSED [ 29%]
scripts/test_e2e_smoke_encoding.py::PIISafetyTests::test_redact_command_masks_sensitive_flags PASSED [ 29%]
scripts/test_e2e_smoke_encoding.py::PIISafetyTests::test_sanitize_ts_action_id_fingerprints_event PASSED [ 30%]
scripts/test_e2e_smoke_encoding.py::FollowupProofTests::test_followup_fingerprint_populated_when_performed PASSED [ 30%]
scripts/test_e2e_smoke_encoding.py::FollowupProofTests::test_followup_payload_inherits_parent_and_sets_followup_fields PASSED [ 30%]
scripts/test_e2e_smoke_encoding.py::FollowupProofTests::test_followup_proof_handles_missing_event PASSED [ 30%]
scripts/test_e2e_smoke_encoding.py::SummaryAppendTests::test_append_summary_writes_expected_sections PASSED [ 31%]
scripts/test_e2e_smoke_encoding.py::OpenAIEvidenceTests::test_openai_evidence_contains_required_fields PASSED [ 31%]
scripts/test_e2e_smoke_encoding.py::OpenAIEvidenceTests::test_openai_requirements_accept_fallback PASSED [ 31%]
scripts/test_e2e_smoke_encoding.py::OpenAIEvidenceTests::test_openai_requirements_fail_when_missing PASSED [ 32%]
scripts/test_e2e_smoke_encoding.py::OpenAIEvidenceTests::test_openai_rewrite_evidence_disabled PASSED [ 32%]
scripts/test_e2e_smoke_encoding.py::OpenAIEvidenceTests::test_openai_routing_evidence_maps_response_id PASSED [ 32%]
scripts/test_e2e_smoke_encoding.py::OpenAIEvidenceTests::test_openai_routing_evidence_missing_response_id PASSED [ 32%]
scripts/test_e2e_smoke_encoding.py::WaitForTicketReadyTests::test_wait_for_ticket_ready_returns_snapshot PASSED [ 33%]
scripts/test_e2e_smoke_encoding.py::WaitForTicketReadyTests::test_wait_for_ticket_ready_times_out PASSED [ 33%]
scripts/test_e2e_smoke_encoding.py::OpenAIRewriteWaitTests::test_wait_for_openai_rewrite_audit_record PASSED [ 33%]
scripts/test_e2e_smoke_encoding.py::OpenAIRewriteWaitTests::test_wait_for_openai_rewrite_state_record PASSED [ 34%]
scripts/test_e2e_smoke_encoding.py::FallbackCloseTests::test_fallback_close_records_alt_paths_and_metadata PASSED [ 34%]
scripts/test_e2e_smoke_encoding.py::CriteriaTests::test_middleware_outcome_accepts_resolved PASSED [ 34%]
scripts/test_e2e_smoke_encoding.py::CriteriaTests::test_middleware_outcome_counts_positive_tag_added PASSED [ 34%]
scripts/test_e2e_smoke_encoding.py::CriteriaTests::test_middleware_outcome_ignores_historical_skip_tags PASSED [ 35%]
scripts/test_e2e_smoke_encoding.py::CriteriaTests::test_middleware_outcome_rejects_route_to_support_tag_added PASSED [ 35%]
scripts/test_e2e_smoke_encoding.py::CriteriaTests::test_middleware_outcome_rejects_skip_tags PASSED [ 35%]
scripts/test_e2e_smoke_encoding.py::CriteriaTests::test_middleware_outcome_requires_tag_added_not_only_present PASSED [ 36%]
scripts/test_e2e_smoke_encoding.py::CriteriaTests::test_pii_guard_detects_patterns PASSED [ 36%]
scripts/test_e2e_smoke_encoding.py::CriteriaTests::test_sanitize_decimals_converts PASSED [ 36%]
scripts/test_e2e_smoke_encoding.py::URLEncodingTests::test_middleware_encodes_email_based_conversation_id PASSED [ 36%]
scripts/test_e2e_smoke_encoding.py::URLEncodingTests::test_middleware_encodes_plus_sign_in_conversation_id PASSED [ 37%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_coerce_ticket_list PASSED [ 37%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_compute_metrics_empty PASSED [ 37%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_compute_metrics_non_empty PASSED [ 38%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_deterministic_baseline_min_score PASSED [ 38%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_eval_output_structure_and_no_raw_text PASSED [ 38%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_evaluate_examples_with_llm PASSED [ 38%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_extract_message PASSED [ 39%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_fetch_payload_helpers PASSED [ 39%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_fetch_recent_ticket_ids_errors PASSED [ 39%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_fetch_recent_ticket_ids_success PASSED [ 40%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_is_prod_target_variants PASSED [ 40%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_label_and_redaction_helpers PASSED [ 40%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_load_jsonl_dataset_errors PASSED [ 40%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_load_richpanel_examples_success_and_skip PASSED [ 41%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_main_dataset_and_richpanel_paths PASSED [ 41%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_main_requires_write_disabled_for_prod PASSED [ 41%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_print_metrics_available PASSED [ 42%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_require_env_flag PASSED [ 42%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_resolve_env_name_priority PASSED [ 42%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_run_richpanel_eval_source_metadata PASSED [ 42%]
scripts/test_eval_order_status_intent.py::OrderStatusIntentEvalTests::test_write_summary PASSED [ 43%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalGuardTests::test_prod_requires_write_disabled PASSED [ 43%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_build_paths_create_dirs PASSED [ 43%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_build_richpanel_client_sets_base_url PASSED [ 44%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_extract_customer_identifiers PASSED [ 44%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_extract_order_payload_merges PASSED [ 44%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_fetch_conversation_handles_error_status PASSED [ 44%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_fetch_conversation_handles_exception PASSED [ 45%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_fetch_ticket_raises_when_all_fail PASSED [ 45%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_fetch_ticket_uses_number_path_on_failure PASSED [ 45%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_http_trace_capture_wraps_urlopen PASSED [ 46%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_http_trace_records_and_asserts PASSED [ 46%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_http_trace_service_mapping PASSED [ 46%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_http_trace_to_dict PASSED [ 46%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_is_prod_target_detects_env PASSED [ 47%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_is_prod_target_detects_prod_key_and_base PASSED [ 47%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_is_prod_target_false_for_non_prod PASSED [ 47%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_main_runs_with_stubbed_client PASSED [ 48%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_redact_identifier_empty PASSED [ 48%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_redact_path_handles_empty PASSED [ 48%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_redact_path_hashes_ids PASSED [ 48%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_redact_path_keeps_alpha_segment PASSED [ 49%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_require_env_flag_mismatch_raises PASSED [ 49%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_require_env_flag_missing_raises PASSED [ 49%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_require_env_flags_success PASSED [ 50%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_resolve_env_name_defaults_to_local PASSED [ 50%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_resolve_env_name_prefers_richpanel_env PASSED [ 50%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_resolve_richpanel_base_url_override PASSED [ 51%]
scripts/test_live_readonly_shadow_eval.py::LiveReadonlyShadowEvalHelpersTests::test_tracking_present_checks_fields PASSED [ 51%]
scripts/test_llm_reply_rewriter.py::ReplyRewriteTests::test_fallback_on_low_confidence_preserves_original PASSED [ 51%]
scripts/test_llm_reply_rewriter.py::ReplyRewriteTests::test_fallback_on_parse_failure_preserves_original PASSED [ 51%]
scripts/test_llm_reply_rewriter.py::ReplyRewriteTests::test_gates_block_network PASSED [ 52%]
scripts/test_llm_reply_rewriter.py::ReplyRewriteTests::test_gates_block_outbound PASSED [ 52%]
scripts/test_llm_reply_rewriter.py::ReplyRewriteTests::test_gates_block_when_disabled PASSED [ 52%]
scripts/test_llm_reply_rewriter.py::ReplyRewriteTests::test_logs_do_not_include_body PASSED [ 53%]
scripts/test_llm_reply_rewriter.py::ReplyRewriteTests::test_no_response_returns_fallback PASSED [ 53%]
scripts/test_llm_reply_rewriter.py::ReplyRewriteTests::test_parse_response_brace_and_escape_inside_string PASSED [ 53%]
scripts/test_llm_reply_rewriter.py::ReplyRewriteTests::test_parse_response_brace_inside_string PASSED [ 53%]
scripts/test_llm_reply_rewriter.py::ReplyRewriteTests::test_parse_response_extracts_embedded_json PASSED [ 54%]
scripts/test_llm_reply_rewriter.py::ReplyRewriteTests::test_response_id_reason_set_when_raw_empty PASSED [ 54%]
scripts/test_llm_reply_rewriter.py::ReplyRewriteTests::test_rewrite_applies_when_enabled_and_safe PASSED [ 54%]
scripts/test_llm_routing.py::GatingTests::test_gating_allows_all_enabled PASSED [ 55%]
scripts/test_llm_routing.py::GatingTests::test_gating_blocks_automation_disabled PASSED [ 55%]
scripts/test_llm_routing.py::GatingTests::test_gating_blocks_network_disabled PASSED [ 55%]
scripts/test_llm_routing.py::GatingTests::test_gating_blocks_safe_mode PASSED [ 55%]
scripts/test_llm_routing.py::ArtifactTests::test_artifact_contains_deterministic PASSED [ 56%]
scripts/test_llm_routing.py::ArtifactTests::test_artifact_serializable PASSED [ 56%]
scripts/test_llm_routing.py::PrimaryFlagTests::test_default_is_false PASSED [ 56%]
scripts/test_llm_routing.py::PrimaryFlagTests::test_default_uses_deterministic PASSED [ 57%]
scripts/test_llm_routing.py::PrimaryFlagOnTests::test_high_confidence_uses_llm PASSED [ 57%]
scripts/test_llm_routing.py::PrimaryFlagOnTests::test_low_confidence_uses_deterministic PASSED [ 57%]
scripts/test_llm_routing.py::ResponseIdReasonTests::test_response_id_reason_when_raw_empty PASSED [ 57%]
scripts/test_llm_routing.py::SuggestionTests::test_is_valid_with_invalid_intent PASSED [ 58%]
scripts/test_llm_routing.py::SuggestionTests::test_is_valid_with_valid_data PASSED [ 58%]
scripts/test_llm_routing.py::SuggestionTests::test_passes_threshold PASSED [ 58%]
scripts/test_llm_routing.py::ThresholdTests::test_custom_threshold PASSED [ 59%]
scripts/test_llm_routing.py::ThresholdTests::test_default_threshold PASSED [ 59%]
scripts/test_llm_routing.py::ThresholdTests::test_min_confidence_above_one_falls_back PASSED [ 59%]
scripts/test_llm_routing.py::ThresholdTests::test_min_confidence_empty_string_falls_back PASSED [ 59%]
scripts/test_llm_routing.py::ThresholdTests::test_min_confidence_invalid_falls_back PASSED [ 60%]
scripts/test_llm_routing.py::ThresholdTests::test_min_confidence_negative_falls_back PASSED [ 60%]
scripts/test_llm_routing.py::ThresholdTests::test_min_confidence_overrides_legacy PASSED [ 60%]
scripts/test_openai_client.py::OpenAIClientTests::test_automation_disabled_short_circuits_transport PASSED [ 61%]
scripts/test_openai_client.py::OpenAIClientTests::test_gpt5_payload_allows_nonzero_temperature PASSED [ 61%]
scripts/test_openai_client.py::OpenAIClientTests::test_gpt5_payload_uses_max_completion_tokens PASSED [ 61%]
scripts/test_openai_client.py::OpenAIClientTests::test_header_redaction_masks_sensitive_keys PASSED [ 61%]
scripts/test_openai_client.py::OpenAIClientTests::test_integrations_namespace_alias PASSED [ 62%]
scripts/test_openai_client.py::OpenAIClientTests::test_max_tokens_must_be_positive PASSED [ 62%]
scripts/test_openai_client.py::OpenAIClientTests::test_missing_secret_short_circuits_to_dry_run PASSED [ 62%]
scripts/test_openai_client.py::OpenAIClientTests::test_network_blocked_short_circuits PASSED [ 63%]
scripts/test_openai_client.py::OpenAIClientTests::test_non_gpt5_payload_uses_max_tokens_and_metadata PASSED [ 63%]
scripts/test_openai_client.py::OpenAIClientTests::test_offline_eval_runs_without_network PASSED [ 63%]
scripts/test_openai_client.py::OpenAIClientTests::test_prompt_builder_is_deterministic PASSED [ 63%]
scripts/test_openai_client.py::OpenAIClientTests::test_safe_mode_short_circuits_transport PASSED [ 64%]
scripts/test_openai_client.py::OpenAIClientTests::test_secret_path_uses_lowercased_env PASSED [ 64%]
scripts/test_order_lookup.py::OrderLookupTests::test_nested_order_tracking_numeric_is_extracted PASSED [ 64%]
scripts/test_order_lookup.py::OrderLookupTests::test_nested_order_tracking_string_is_extracted PASSED [ 65%]
scripts/test_order_lookup.py::OrderLookupTests::test_offline_lookup_does_not_call_transports PASSED [ 65%]
scripts/test_order_lookup.py::OrderLookupTests::test_payload_fulfillments_list_used_for_tracking_and_carrier PASSED [ 65%]
scripts/test_order_lookup.py::OrderLookupTests::test_payload_missing_shipping_signals_offline_returns_baseline PASSED [ 65%]
scripts/test_order_lookup.py::OrderLookupTests::test_payload_only_summary_skips_network_when_enabled PASSED [ 66%]
scripts/test_order_lookup.py::OrderLookupTests::test_payload_only_summary_when_network_disabled PASSED [ 66%]
scripts/test_order_lookup.py::OrderLookupTests::test_payload_orders_list_candidate_is_used PASSED [ 66%]
scripts/test_order_lookup.py::OrderLookupTests::test_payload_shipment_dict_used_for_carrier_and_service PASSED [ 67%]
scripts/test_order_lookup.py::OrderLookupTests::test_payload_tracking_dict_id_fallback PASSED [ 67%]
scripts/test_order_lookup.py::OrderLookupTests::test_payload_tracking_dict_number_is_used_not_stringified PASSED [ 67%]
scripts/test_order_lookup.py::OrderLookupTests::test_shipstation_enrichment_fills_tracking_when_shopify_missing PASSED [ 67%]
scripts/test_order_lookup.py::OrderLookupTests::test_shopify_enrichment_merges_fields_when_network_enabled PASSED [ 68%]
scripts/test_order_lookup.py::OrderLookupTests::test_shopify_fallback_used_when_payload_has_no_shipping_fields PASSED [ 68%]
scripts/test_pipeline_handlers.py::FingerprintReplyBodyTests::test_fingerprint_reply_body_deterministic PASSED [ 68%]
scripts/test_pipeline_handlers.py::FingerprintReplyBodyTests::test_fingerprint_reply_body_different_inputs PASSED [ 69%]
scripts/test_pipeline_handlers.py::FingerprintReplyBodyTests::test_fingerprint_reply_body_empty_string PASSED [ 69%]
scripts/test_pipeline_handlers.py::FingerprintReplyBodyTests::test_fingerprint_reply_body_none PASSED [ 69%]
scripts/test_pipeline_handlers.py::FingerprintReplyBodyTests::test_fingerprint_reply_body_unicode PASSED [ 69%]
scripts/test_pipeline_handlers.py::PipelineTests::test_build_event_envelope_truncates_and_sanitizes PASSED [ 70%]
scripts/test_pipeline_handlers.py::PipelineTests::test_ddb_sanitize_converts_floats_to_decimals_and_strips_nan PASSED [ 70%]
scripts/test_pipeline_handlers.py::PipelineTests::test_execute_and_record_writes_state_and_audit_tables PASSED [ 70%]
scripts/test_pipeline_handlers.py::PipelineTests::test_execute_plan_dry_run_records PASSED [ 71%]
scripts/test_pipeline_handlers.py::PipelineTests::test_idempotency_write_persists_expected_fields PASSED [ 71%]
scripts/test_pipeline_handlers.py::PipelineTests::test_kill_switch_cache_is_respected PASSED [ 71%]
scripts/test_pipeline_handlers.py::PipelineTests::test_kill_switch_env_override_requires_both_vars_and_fails_closed_on_ssm_error PASSED [ 71%]
scripts/test_pipeline_handlers.py::PipelineTests::test_kill_switch_env_override_takes_precedence_and_skips_ssm PASSED [ 72%]
scripts/test_pipeline_handlers.py::PipelineTests::test_no_tracking_reply_includes_remaining_window PASSED [ 72%]
scripts/test_pipeline_handlers.py::PipelineTests::test_normalize_event_populates_defaults PASSED [ 72%]
scripts/test_pipeline_handlers.py::PipelineTests::test_plan_allows_automation_candidate PASSED [ 73%]
scripts/test_pipeline_handlers.py::PipelineTests::test_plan_generates_eta_reply_when_context_present PASSED [ 73%]
scripts/test_pipeline_handlers.py::PipelineTests::test_plan_generates_tracking_present_draft_reply PASSED [ 73%]
scripts/test_pipeline_handlers.py::PipelineTests::test_plan_respects_safe_mode PASSED [ 73%]
scripts/test_pipeline_handlers.py::PipelineTests::test_plan_skips_order_status_when_safety_blocks PASSED [ 74%]
scripts/test_pipeline_handlers.py::PipelineTests::test_plan_suppresses_when_order_context_missing PASSED [ 74%]
scripts/test_pipeline_handlers.py::PipelineTests::test_routing_classifies_returns PASSED [ 74%]
scripts/test_pipeline_handlers.py::PipelineTests::test_routing_fallback_when_message_missing PASSED [ 75%]
scripts/test_pipeline_handlers.py::PipelineTests::test_state_and_audit_redact_customer_body PASSED [ 75%]
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_exception_includes_openai_rewrite PASSED [ 75%]
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_executes_when_enabled PASSED [ 75%]
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_followup_after_auto_reply_routes_to_email_support PASSED [ 76%]
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_logging_does_not_emit_reply_body PASSED [ 76%]
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_reply_dry_run_does_not_send PASSED [ 76%]
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_reply_update_failure PASSED [ 77%]
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_retries_do_not_duplicate_comment PASSED [ 77%]
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_rewrite_hashes_populated PASSED [ 77%]
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_skip_when_disabled PASSED [ 77%]
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_skips_when_ticket_already_resolved PASSED [ 78%]
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_status_read_failure_routes_to_email_support PASSED [ 78%]
scripts/test_pipeline_handlers.py::OutboundRoutingTagsTests::test_routing_tags_executes_when_enabled PASSED [ 78%]
scripts/test_pipeline_handlers.py::OutboundRoutingTagsTests::test_routing_tags_skip_when_outbound_disabled PASSED [ 79%]
scripts/test_read_only_shadow_mode.py::ReadOnlyShadowModeTests::test_outbound_disabled_skips_writes_while_allowing_shadow_reads PASSED [ 79%]
scripts/test_read_only_shadow_mode.py::ReadOnlyShadowModeTests::test_plan_actions_propagates_allow_network_for_shadow_reads PASSED [ 79%]
scripts/test_richpanel_client.py::RichpanelClientTests::test_dry_run_default_skips_transport PASSED [ 79%]
scripts/test_richpanel_client.py::RichpanelClientTests::test_env_flag_allows_outbound_requests PASSED [ 80%]
scripts/test_richpanel_client.py::RichpanelClientTests::test_env_namespace_is_reflected_in_secret_path PASSED [ 80%]
scripts/test_richpanel_client.py::RichpanelClientTests::test_executor_defaults_to_dry_run PASSED [ 80%]
scripts/test_richpanel_client.py::RichpanelClientTests::test_executor_respects_outbound_enabled_flag PASSED [ 81%]
scripts/test_richpanel_client.py::RichpanelClientTests::test_get_ticket_metadata_handles_non_dict_ticket_number PASSED [ 81%]
scripts/test_richpanel_client.py::RichpanelClientTests::test_get_ticket_metadata_handles_non_dict_ticket_string PASSED [ 81%]
scripts/test_richpanel_client.py::RichpanelClientTests::test_get_ticket_metadata_handles_ticket_dict PASSED [ 81%]
scripts/test_richpanel_client.py::RichpanelClientTests::test_read_only_blocks_non_get PASSED [ 82%]
scripts/test_richpanel_client.py::RichpanelClientTests::test_redaction_masks_api_key PASSED [ 82%]
scripts/test_richpanel_client.py::RichpanelClientTests::test_retries_on_429_and_honors_retry_after PASSED [ 82%]
scripts/test_richpanel_client.py::RichpanelClientTests::test_transport_errors_retry_and_raise PASSED [ 83%]
scripts/test_richpanel_client.py::RichpanelClientTests::test_writes_blocked_when_write_disabled_env_set PASSED [ 83%]
scripts/test_shadow_order_status.py::ShadowOrderStatusGuardTests::test_env_must_be_staging_or_prod PASSED [ 83%]
scripts/test_shadow_order_status.py::ShadowOrderStatusGuardTests::test_require_env_flag_missing_and_mismatch PASSED [ 83%]
scripts/test_shadow_order_status.py::ShadowOrderStatusGuardTests::test_requires_confirm_flag PASSED [ 84%]
scripts/test_shadow_order_status.py::ShadowOrderStatusGuardTests::test_requires_network_read_flag PASSED [ 84%]
scripts/test_shadow_order_status.py::ShadowOrderStatusGuardTests::test_requires_readonly_flags PASSED [ 84%]
scripts/test_shadow_order_status.py::ShadowOrderStatusGuardTests::test_requires_richpanel_env PASSED [ 85%]
scripts/test_shadow_order_status.py::ShadowOrderStatusGuardTests::test_resolve_env_name_fallback PASSED [ 85%]
scripts/test_shadow_order_status.py::ShadowOrderStatusGuardTests::test_resolve_env_name_prefers_richpanel_env PASSED [ 85%]
scripts/test_shadow_order_status.py::ShadowOrderStatusGuardTests::test_shopify_secret_id_validation PASSED [ 85%]
scripts/test_shadow_order_status.py::ShadowOrderStatusGuardTests::test_shopify_secret_override_guard PASSED [ 86%]
scripts/test_shadow_order_status.py::ShadowOrderStatusGuardTests::test_whitespace_ticket_id_rejected PASSED [ 86%]
scripts/test_shadow_order_status.py::ShadowOrderStatusRedactionTests::test_customer_redaction PASSED [ 86%]
scripts/test_shadow_order_status.py::ShadowOrderStatusRedactionTests::test_email_hash_and_last4 PASSED [ 87%]
scripts/test_shadow_order_status.py::ShadowOrderStatusRedactionTests::test_redact_path_variants PASSED [ 87%]
scripts/test_shadow_order_status.py::ShadowOrderStatusRedactionTests::test_tracking_present PASSED [ 87%]
scripts/test_shadow_order_status.py::ShadowOrderStatusTraceTests::test_http_trace_allows_openai_when_enabled PASSED [ 87%]
scripts/test_shadow_order_status.py::ShadowOrderStatusTraceTests::test_http_trace_blocks_non_get PASSED [ 88%]
scripts/test_shadow_order_status.py::ShadowOrderStatusTraceTests::test_http_trace_capture_restores_urlopen PASSED [ 88%]
scripts/test_shadow_order_status.py::ShadowOrderStatusTraceTests::test_http_trace_unknown_service PASSED [ 88%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_build_openai_evidence PASSED [ 89%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_build_route_info PASSED [ 89%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_draft_reply_type_no_tracking PASSED [ 89%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_extract_latest_customer_message PASSED [ 89%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_extract_order_payload PASSED [ 90%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_fetch_conversation_handles_error PASSED [ 90%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_fetch_conversation_handles_exception PASSED [ 90%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_fetch_ticket_fallbacks PASSED [ 91%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_fetch_ticket_raises PASSED [ 91%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_lookup_order_summary_baseline PASSED [ 91%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_lookup_order_summary_payload_first_payload PASSED [ 91%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_lookup_order_summary_payload_first_shopify PASSED [ 92%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_main_continues_after_failure PASSED [ 92%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_main_error_is_redacted PASSED [ 92%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_main_output_redacts_pii PASSED [ 93%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_run_ticket_is_read_only PASSED [ 93%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_run_ticket_non_order_status PASSED [ 93%]
scripts/test_shadow_order_status.py::ShadowOrderStatusNoWriteTests::test_run_ticket_openai_evidence PASSED [ 93%]
scripts/test_shipstation_client.py::ShipStationClientTests::test_dry_run_default_skips_transport PASSED [ 94%]
scripts/test_shipstation_client.py::ShipStationClientTests::test_executor_allows_outbound_when_enabled PASSED [ 94%]
scripts/test_shipstation_client.py::ShipStationClientTests::test_executor_blocks_without_env_flag PASSED [ 94%]
scripts/test_shipstation_client.py::ShipStationClientTests::test_list_shipments_builds_expected_path_and_sorted_query PASSED [ 95%]
scripts/test_shipstation_client.py::ShipStationClientTests::test_list_shipments_respects_network_blocked_gate PASSED [ 95%]
scripts/test_shipstation_client.py::ShipStationClientTests::test_missing_credentials_short_circuits PASSED [ 95%]
scripts/test_shipstation_client.py::ShipStationClientTests::test_redaction_masks_sensitive_headers PASSED [ 95%]
scripts/test_shipstation_client.py::ShipStationClientTests::test_retry_honors_retry_after_header PASSED [ 96%]
scripts/test_shopify_client.py::ShopifyClientTests::test_dry_run_default_skips_transport PASSED [ 96%]
scripts/test_shopify_client.py::ShopifyClientTests::test_env_namespace_is_reflected_in_secret_path PASSED [ 96%]
scripts/test_shopify_client.py::ShopifyClientTests::test_falls_back_to_legacy_secret_when_canonical_missing PASSED [ 97%]
scripts/test_shopify_client.py::ShopifyClientTests::test_get_order_builds_expected_path_and_query PASSED [ 97%]
scripts/test_shopify_client.py::ShopifyClientTests::test_get_order_respects_network_blocked_gate PASSED [ 97%]
scripts/test_shopify_client.py::ShopifyClientTests::test_missing_secret_short_circuits PASSED [ 97%]
scripts/test_shopify_client.py::ShopifyClientTests::test_redaction_masks_tokens PASSED [ 98%]
scripts/test_shopify_client.py::ShopifyClientTests::test_retries_on_429_and_honors_retry_after PASSED [ 98%]
scripts/test_worker_handler_flag_wiring.py::WorkerHandlerFlagWiringTests::test_allow_network_enabled_when_shadow_reads_allowed PASSED [ 98%]
scripts/test_worker_handler_flag_wiring.py::WorkerHandlerFlagWiringTests::test_plan_actions_receives_allow_network_and_outbound_flags PASSED [ 99%]
scripts/test_worker_handler_flag_wiring.py::WorkerHandlerFlagWiringTests::test_plan_actions_receives_off_path_flags_when_outbound_disabled PASSED [ 99%]
scripts/test_worker_handler_flag_wiring.py::WorkerHandlerFlagWiringTests::test_record_openai_rewrite_evidence_updates_tables PASSED [ 99%]
scripts/test_worker_handler_flag_wiring.py::WorkerHandlerFlagWiringTests::test_record_openai_rewrite_evidence_uses_group_id_fallback PASSED [100%]

============================== warnings summary ===============================
scripts/test_order_lookup.py::OrderLookupTests::test_shipstation_enrichment_fills_tracking_when_shopify_missing
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_executes_when_enabled
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_logging_does_not_emit_reply_body
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_reply_dry_run_does_not_send
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_reply_update_failure
scripts/test_pipeline_handlers.py::OutboundOrderStatusTests::test_outbound_retries_do_not_duplicate_comment
scripts/test_shipstation_client.py::ShipStationClientTests::test_executor_allows_outbound_when_enabled
scripts/test_shipstation_client.py::ShipStationClientTests::test_list_shipments_builds_expected_path_and_sorted_query
scripts/test_shipstation_client.py::ShipStationClientTests::test_retry_honors_retry_after_header
  C:\Users\kevin\AppData\Local\Programs\Python\Python312\Lib\site-packages\botocore\auth.py:424: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    datetime_now = datetime.datetime.utcnow()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
============= 349 passed, 9 warnings, 4 subtests passed in 5.90s ==============
